(()=>{"use strict";var e=new function(){this.ajax_response="",this.ajaxVars={ajaxurl:"/wp-admin/admin-ajax.php",nonce:document.querySelector("meta[name='_wpr_nonce']").getAttribute("content")},this.request=new XMLHttpRequest,this.ajax_vote=function(e,t){var a={action:"wpr_voted",nonce:this.ajaxVars.nonce,post_id:e,vote:t},s=Object.keys(a).map((function(e){return[e,a[e]].map(encodeURIComponent).join("=")})).join("&");this.request.open("POST",this.ajaxVars.ajaxurl,!0),this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.request.send(s)}};new function(){var t=this,a=this;this.stars=document.querySelectorAll(".wpr-wrapp .icon-star"),this.hasClass=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")>-1};for(var s=function(s){t.stars[s].addEventListener("click",(function(){var t=this.parentElement,n=t.parentElement.getElementsByClassName("wpr-rating-loader")[0];n.classList.remove("wpr-hide"),t.classList.add("wpr-hide");var r=t.children,i=this.dataset.value;e.ajax_vote(t.dataset.id,i),e.request.onreadystatechange=function(){e.request.readyState===XMLHttpRequest.DONE&&200===this.status&&(null!=e.request.responseText?setTimeout((function(){try{var n=JSON.parse(e.request.responseText);for(s in r)a.hasClass(r[s],"checked")&&r[s].classList.remove("checked");r[Math.abs(parseInt(n.data.avg)-5)].classList.add("checked"),document.querySelector("#wpr-widget-"+t.dataset.id+" .wpr-total").innerHTML="("+parseInt(n.data.total)+")"}catch(e){}}),300):console.log("Ajax error: No data received")),n.classList.add("wpr-hide"),t.classList.remove("wpr-hide")}}))},n=0;n<this.stars.length;n++)s(n)}})();