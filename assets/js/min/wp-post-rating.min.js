var AjaxSendRequest=function(){var n=this;this.ajax_response="",this.ajaxVars={ajaxurl:"/wp-admin/admin-ajax.php",nonce:document.querySelector("meta[name='_wpr_nonce']").getAttribute("content")},this.request=new XMLHttpRequest,this.ajax_vote=function(e,t){var s={action:"wpr_voted",nonce:this.ajaxVars.nonce,post_id:e,vote:t},a=Object.keys(s).map(function(e){return[e,s[e]].map(encodeURIComponent).join("=")}).join("&");this.request.open("POST",this.ajaxVars.ajaxurl,!0),this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.request.onreadystatechange=function(){4===this.readyState&&200===this.status&&(null!=this.responseText?n.ajax_response=this.responseText:console.log("Ajax error: No data received"))},this.request.send(a)}},ajaxClient=new AjaxSendRequest,Stars=function(){var a=this;for(this.stars=document.querySelectorAll(".icon-star"),this.hasClass=function(e,t){return-1<(" "+e.className+" ").indexOf(" "+t+" ")},i=0;i<this.stars.length;i++)this.stars[i].addEventListener("click",function(){var t=this.parentElement,s=t.parentElement.children[1];s.classList.remove("wpr-hide"),t.classList.add("wpr-hide"),childrens=t.children;var e=this.dataset.value;ajaxClient.ajax_vote(t.dataset.id,e),setTimeout(function(){var e=JSON.parse(ajaxClient.ajax_response);for(i in childrens)a.hasClass(childrens[i],"checked")&&childrens[i].classList.remove("checked");childrens[Math.abs(parseInt(e.avg)-5)].classList.add("checked"),document.querySelector("#wpr-widget-"+t.dataset.id+" .wpr-total").innerHTML="("+parseInt(e.total)+")",s.classList.add("wpr-hide"),t.classList.remove("wpr-hide")},500)})};new Stars;