"use strict";var AjaxSendRequest=function(){this.ajax_response="",this.ajaxVars={ajaxurl:"/wp-admin/admin-ajax.php",nonce:document.querySelector("meta[name='_wpr_nonce']").getAttribute("content")},this.request=new XMLHttpRequest,this.ajax_vote=function(e,t){var a={action:"wpr_voted",nonce:this.ajaxVars.nonce,post_id:e,vote:t},s=Object.keys(a).map(function(e){return[e,a[e]].map(encodeURIComponent).join("=")}).join("&");this.request.open("POST",this.ajaxVars.ajaxurl,!0),this.request.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.request.send(s)}},ajaxClient=new AjaxSendRequest,Stars=function(){var e=this,r=this;this.stars=document.querySelectorAll(".wpr-wrapp .icon-star"),this.hasClass=function(e,t){return-1<(" "+e.className+" ").indexOf(" "+t+" ")};for(var t=0;t<this.stars.length;t++)!function(n){e.stars[n].addEventListener("click",function(){var t=this.parentElement,e=t.parentElement.getElementsByClassName("wpr-rating-loader")[0];e.classList.remove("wpr-hide"),t.classList.add("wpr-hide");var a=t.children,s=this.dataset.value;ajaxClient.ajax_vote(t.dataset.id,s),ajaxClient.request.onreadystatechange=function(){ajaxClient.request.readyState===XMLHttpRequest.DONE&&200===this.status&&(null!=ajaxClient.request.responseText?setTimeout(function(){try{var e=JSON.parse(ajaxClient.request.responseText);for(n in a)r.hasClass(a[n],"checked")&&a[n].classList.remove("checked");a[Math.abs(parseInt(e.data.avg)-5)].classList.add("checked"),document.querySelector("#wpr-widget-"+t.dataset.id+" .wpr-total").innerHTML="("+parseInt(e.data.total)+")"}catch(e){}},300):console.log("Ajax error: No data received")),e.classList.add("wpr-hide"),t.classList.remove("wpr-hide")}})}(t)};new Stars;